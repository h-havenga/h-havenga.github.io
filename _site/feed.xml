<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.6.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2017-10-26T12:52:37+02:00</updated><id>http://localhost:4000/</id><title type="html">Henno Havenga</title><subtitle>Geo and spatial science graduate student, Debian GNU\Linux user, open-source advocate, runner and dog lover.  I'm navigating this strange new world of programming, blogging and sharing. Bare with me.  
</subtitle><entry><title type="html">Using Generic Mapping Tools</title><link href="http://localhost:4000/maps/data/2017/10/19/using-generic-mapping-tools.html" rel="alternate" type="text/html" title="Using Generic Mapping Tools" /><published>2017-10-19T10:00:29+02:00</published><updated>2017-10-19T10:00:29+02:00</updated><id>http://localhost:4000/maps/data/2017/10/19/using-generic-mapping-tools</id><content type="html" xml:base="http://localhost:4000/maps/data/2017/10/19/using-generic-mapping-tools.html">&lt;p&gt;Generic Mapping Tools (GMT) is a relatively unknown command line tool for geo and
spatial analysis. I say unknown because I only know one other person who
actually uses it. Looking for resources online does however indicate that
some universities have courses teaching GMT, no such luck for me, I had to
learn it myself. I’d say the learning curve is quite steep, the only tool I
can compare it with right now is GNUPLOT, another really cool command line
tool for creating high quality graphics.&lt;/p&gt;

&lt;p&gt;To create your map is pretty easy, if you use a bash script it is even
easier in my humble opinion. Let’s start off with a map of South-Africa
directly from the command line:&lt;/p&gt;

&lt;p&gt;First install gmt:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt install gmt&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Now we can make a basic map directly from the command line:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;gmt pscoast &lt;span class=&quot;nt&quot;&gt;-R15&lt;/span&gt;/34/-35/-22 &lt;span class=&quot;nt&quot;&gt;-JM20&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Ba&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-B&lt;/span&gt;+t&lt;span class=&quot;s2&quot;&gt;&quot;South-Africa&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Na&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Df&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-G100&lt;/span&gt;/200/100 &lt;span class=&quot;nt&quot;&gt;-S0&lt;/span&gt;/50/250 &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; south_africa.ps&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Breaking the commands down make the syntax a little more understandable in
bash. Feel free to use whatever editor you like. Lets do:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vim southafrica.sh&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;in your new .sh script&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# MAKE A MAP!&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Define the names of the input, output and coordinates details: &lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;south_africa.ps           &lt;span class=&quot;c&quot;&gt;# This will be the name of the map&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Lets do the boundaries&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;north&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-22&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;south&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-35&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;east&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;34
&lt;span class=&quot;nv&quot;&gt;west&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;15

&lt;span class=&quot;c&quot;&gt;# Color intensities (RGB) g for ground and s for sea&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;g_red&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;100
&lt;span class=&quot;nv&quot;&gt;g_green&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;200
&lt;span class=&quot;nv&quot;&gt;g_blue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;100

&lt;span class=&quot;nv&quot;&gt;s_red&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0
&lt;span class=&quot;nv&quot;&gt;s_green&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;50
&lt;span class=&quot;nv&quot;&gt;s_blue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;250

&lt;span class=&quot;c&quot;&gt;# Define the border ticks and projection (mercator)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;tick&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'-B2.5/2.5WSen'&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;proj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'-JM20'&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Lets make a base map by calling GMT  &lt;/span&gt;
gmt psbasemap &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$west&lt;/span&gt;/&lt;span class=&quot;nv&quot;&gt;$east&lt;/span&gt;/&lt;span class=&quot;nv&quot;&gt;$south&lt;/span&gt;/&lt;span class=&quot;nv&quot;&gt;$north&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$proj&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$tick&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-X5&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Lets start drawing some boundaries&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# N = National Borders (Na = National Borders All)&lt;/span&gt;
gmt pscoast &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt;.25 &lt;span class=&quot;nt&quot;&gt;-Df&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-B&lt;/span&gt;+t&lt;span class=&quot;s2&quot;&gt;&quot;South Africa&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Na&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt;.05 &lt;span class=&quot;nt&quot;&gt;-G&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$g_red&lt;/span&gt;/&lt;span class=&quot;nv&quot;&gt;$g_green&lt;/span&gt;/&lt;span class=&quot;nv&quot;&gt;$g_blue&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-S&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$s_red&lt;/span&gt;/&lt;span class=&quot;nv&quot;&gt;$s_green&lt;/span&gt;/&lt;span class=&quot;nv&quot;&gt;$s_blue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;You should see this basic map of South-Africa:&lt;br /&gt;
&lt;img src=&quot;http://localhost:4000/assets/images/maps/south_africa.png&quot; alt=&quot;gmtmap&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;sub&gt;Note that I converted is from postscript format to reduce size. &lt;/sub&gt;&lt;/p&gt;

&lt;p&gt;This breaks down the commands and when you need to you can just edit the
script as you need to. Obviously this is the most basic of maps. I’ll try
and get some more advanced maps as this blog evolves.&lt;/p&gt;</content><author><name></name></author><summary type="html">Generic Mapping Tools (GMT) is a relatively unknown command line tool for geo and spatial analysis. I say unknown because I only know one other person who actually uses it. Looking for resources online does however indicate that some universities have courses teaching GMT, no such luck for me, I had to learn it myself. I’d say the learning curve is quite steep, the only tool I can compare it with right now is GNUPLOT, another really cool command line tool for creating high quality graphics.</summary></entry><entry><title type="html">Working with IGRA data and GNUPLOT</title><link href="http://localhost:4000/gnuplot/radiosonde/climate/2017/10/10/igra-and-gnuplot.html" rel="alternate" type="text/html" title="Working with IGRA data and GNUPLOT" /><published>2017-10-10T12:43:29+02:00</published><updated>2017-10-10T12:43:29+02:00</updated><id>http://localhost:4000/gnuplot/radiosonde/climate/2017/10/10/igra-and-gnuplot</id><content type="html" xml:base="http://localhost:4000/gnuplot/radiosonde/climate/2017/10/10/igra-and-gnuplot.html">&lt;p&gt;The Integrated Radiosonde Archive is a great online database containing
radiosonde data from around the world, even better is that there is a
already derived dataset with some interesting variables like CAPE, CIN, LI,
SI, TTI and more waiting for someone to use it in some fancy plot
(hopefully for publication one day). All credit to the maintainers of this
database. It’s really well kept up.&lt;/p&gt;

&lt;p&gt;The data was pretty useful in evaluation of some trends associated with
severe storms. Some interesting things stand out (maybe this is my
contribution to science, I think most of it is already well known anyway).
We were able to see that there is a increase to an atmosphere favoring
convective storms over the last 40 years – do I hear the words “global
warming” somewhere? The only index that did not indicate this was the
Totals Totals (TT) index… Why, well I’m not sure yet… In due time, I’ll let
you know. So yes, the environment seems to favor more convective storms
(take note) over the highveld of South-Africa.&lt;/p&gt;

&lt;p&gt;When I finish my thesis I’ll publish some figures here of my findings.&lt;/p&gt;

&lt;p&gt;GNUPLOT, cool for plotting raw data… I actually wrote the original title
long before I wrote this. I stopped using GNUPLOT and switched to R (I’m to
stupid to do complicated stats with GNUPLOT). I did however find it useful
to plot raw time series data quickly. The other tool that I started using
and which I find really cool is GMT or Generic Mapping Tools, I use it to
make nice maps, it’s pretty easy and the quality is great. The learning
curve is quite steep but worth it. You can also do statistics with gnuplot
if you’re smarter then me!&lt;/p&gt;</content><author><name></name></author><summary type="html">The Integrated Radiosonde Archive is a great online database containing radiosonde data from around the world, even better is that there is a already derived dataset with some interesting variables like CAPE, CIN, LI, SI, TTI and more waiting for someone to use it in some fancy plot (hopefully for publication one day). All credit to the maintainers of this database. It’s really well kept up.</summary></entry><entry><title type="html">Getting WRF to work with ERA-Interim data</title><link href="http://localhost:4000/wrf/era-interim/climate/2017/09/20/wrf-and-era.html" rel="alternate" type="text/html" title="Getting WRF to work with ERA-Interim data" /><published>2017-09-20T12:43:29+02:00</published><updated>2017-09-20T12:43:29+02:00</updated><id>http://localhost:4000/wrf/era-interim/climate/2017/09/20/wrf-and-era</id><content type="html" xml:base="http://localhost:4000/wrf/era-interim/climate/2017/09/20/wrf-and-era.html">&lt;p&gt;I actually started a blog as part of another class, but lets pretend
that never happened and mark this as the official start.&lt;/p&gt;

&lt;p&gt;I’m slowly going to start putting myself out there, I’m trying
not to be a hypocrite – I preach open-source but I keep myself closed.&lt;/p&gt;

&lt;p&gt;I’m in the process of running WRF. It’s not been without challenges though,
when running WRF locally compiling can be a major time consumer, you have
to know some GNU/Linux basics, which is actually pretty cool. Okay, I’m all
over the place, but let me write about my current problem and as the blog
evolves hopefully I can get more ordered.&lt;/p&gt;

&lt;p&gt;I’m currently running WRF on a convective scale over the South-Africa
Highveld, the area is also home to Jo’burg and Pretoria, two of
South-Africa major cities, I’m doing this to try to understand hailstorms
better. WRF has various input datasets that can be used to initialize the
model, I’m specifically using ERA-Interim data, but the ERA data requires
some extra steps, I’m not going to try and give an in-depth explanation of
all the steps, but instead I’m just doing them here in the order that was
successful eventually. I also assume that you’ve already complied WRF
successfully and was to lazy to RTFM (like me) and used Google (like me).&lt;/p&gt;

&lt;p&gt;Last thing, I use vim, but replace that with whatever you want, on a remote
machine nano and vi are good alternatives, Emacs is pretty cool (I’m super
slowly learning that) but I don’t know about its availability on all remote
computers.&lt;/p&gt;

&lt;p&gt;First get the data ready in WPS:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;wps/
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./geogrid.exe
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ln &lt;span class=&quot;nt&quot;&gt;-sf&lt;/span&gt; ungrib/Variable_Tables/Vtable.ERA-interim.ml Vtable
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./link_grib.csh ~/ei.oper.an.ml/201311/ei.oper.an.ml.regn128&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; ~/ei.oper.an.sfc/201311/ei.oper.an.sfc.regn128.sc.201311&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./ungrib.exe&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Create ecmwf_coeffs file:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;touch ecmwf_coeffs &lt;span class=&quot;c&quot;&gt;#NOTE: Google for the ecmwf_coeffs contents, its just a table.&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./util/calc_ecmwf_p.exe&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Look for PRES:2013-11-*&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vim namelist.wps
&amp;amp;metgrid
  fg_name &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; ‘FILE’ ‘PRES’
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./metgrid.exe&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Look for met_em.d0*&lt;/p&gt;

&lt;p&gt;If this worked you will now go back and change directory to WRF:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ../WRFV7/test/em_real/
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ln &lt;span class=&quot;nt&quot;&gt;-sf&lt;/span&gt; ../../../WPS3.7/met_em.d0&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./real.exe&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Look for wrfbdy_d01, wrfinput_do1, wrfinput_d02, …&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./wrf.exe&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Look for wrfout_do1_2013* until complete for the run time series&lt;/p&gt;

&lt;p&gt;Again, Google around for ecmwf_coeffs table I’m assuming you check,
double-check and triple check your namelist.wps and namelist.input. If
using more than two domains, check fourth time, its easy to miss something
when looking at to long.&lt;/p&gt;</content><author><name></name></author><summary type="html">I actually started a blog as part of another class, but lets pretend that never happened and mark this as the official start.</summary></entry></feed>