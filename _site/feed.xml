<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.6.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2019-02-24T13:42:05+02:00</updated><id>http://localhost:4000/</id><title type="html">Howzit, I’m Henno</title><subtitle>Geo and spatial science graduate student, Debian GNU\Linux user, open-source advocate, runner and dog lover.  I'm navigating this strange new world of programming, blogging and sharing. Bare with me. 
</subtitle><entry><title type="html">Shapefiles in R - extracting data in a spesific polygon</title><link href="http://localhost:4000/r/2019/02/24/shapefiles-in-R-pointsInpolygons.html" rel="alternate" type="text/html" title="Shapefiles in R - extracting data in a spesific polygon" /><published>2019-02-24T09:40:29+02:00</published><updated>2019-02-24T09:40:29+02:00</updated><id>http://localhost:4000/r/2019/02/24/shapefiles-in-R-pointsInpolygons</id><content type="html" xml:base="http://localhost:4000/r/2019/02/24/shapefiles-in-R-pointsInpolygons.html">&lt;p&gt;I encountered an issue where I wanted to extract points located within
a specific shapefile, in this case the Highveld ecoregion and Gauteng.
Instead of extracting the points in R I assign them a 1/0 (TRUE/FALSE) value in
a new column using &lt;em&gt;point.in.polygon&lt;/em&gt;, following this I the &lt;em&gt;filter&lt;/em&gt; function
in R to create a new dataframe where Highveld == 1. In theory you could use the
&lt;em&gt;over&lt;/em&gt; function which is part of the rgdal package, but I found this
cumbersome.&lt;/p&gt;

&lt;p&gt;So here we have a nice example dataset that is geo-referenced, lets call it &lt;em&gt;libsum.csv&lt;/em&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-csv&quot; data-lang=&quot;csv&quot;&gt;Date     ;Event         ;Place                    ;Latitude  ;Longitude  ;Height(m)               
2014/2/3 ;Rain/flooding ;JOHANNESBURG, GAUTENG    ;-26.12    ;28.02      ;1749       		
2014/2/3 ;Rain/flooding ;SOWETO, GAUTENG          ;-26.14    ;26.15      ;1646       		
2014/2/3 ;Rain/flooding ;LENASIA, GAUTENG         ;-26.20    ;27.51      ;1574       		
2014/2/3 ;Rain/flooding ;TEMBISA, GAUTENG         ;-26.00    ;28.12      ;16         		
2014/2/3 ;Rain/flooding ;MIDRAND, GAUTENG         ;-25.56    ;28.08      ;1539       		
2014/2/3 ;Rain/flooding ;CENTURION, GAUTENG       ;-25.51    ;28.11      ;1432       		
2014/2/3 ;Rain/flooding ;RANDBURG, GAUTENG        ;-26.08    ;27.59      ;1603       		
2014/2/3 ;Rain/flooding ;ROODEPOORT, GAUTENG      ;-26.07    ;27.54      ;1747       		
2014/2/3 ;Rain/flooding ;ALEXANDRA, GAUTENG       ;-26.06    ;28.05      ;1546       		
2014/2/3 ;Rain/flooding ;KRUGERSDORP, GAUTENG     ;-26.07    ;27.54      ;1727       		
2014/2/3 ;Rain/flooding ;MAKHADO, LIMPOPO         ;-23.02    ;29.54      ;950        		
2014/2/3 ;Rain/flooding ;THOHOYANDOU, LIMPOPO     ;-22.52    ;30.28      ;741        		
2014/2/3 ;Rain/flooding ;DELAREYVILLE, NORTH-WEST ;-26.41    ;25.27      ;1349       		
2014/2/3 ;Rain/flooding ;OTTOSDAL, NORTH-WEST     ;-26.48    ;26.00      ;1504       		
2014/2/3 ;Rain/flooding ;VRYBURG, NORTH-WEST      ;-26.57    ;24.43      ;1199       		
2014/2/3 ;Rain/flooding ;WOLMARANSTAD, NORTH-WEST ;-27.12    ;25.58      ;1356       		
2014/2/3 ;Rain/flooding ;TSWAING, NORTH-WEST      ;-26.39    ;25.46      ;1405       		
2010/2/3 ;Other         ;MAGALIESBERG             ;-26.00    ;27.55      ;1480       		
2014/2/3 ;Other         ;LANSERIA, GAUTENG        ;-25.26    ;27.55      ;1362       		&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Now we can open R&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Load some usefull libraries&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tidyverse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reshape2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viridis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rgdal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;grid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gridExtra&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;raster&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GSODR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rgeos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# sudo apt install libgeos\* &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theme_set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theme_classic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;base_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Lets load the df first&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read.csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;libsum.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sep&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;header&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Get shapefiles and define the regions of interest&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;highveld&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readOGR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dsn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;./&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Ecoregions2017&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gauteng&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readOGR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dsn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;./&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Guateng&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Here we extract data that falls within the Higheld ecoregion and Gauteng&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# We create a new column in the df where a 1 or 0 will be assigned if it falls inside the&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# lat and lon of the corresponding polygon&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Highveld&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;point.in.polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Longitude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Latitude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;highveld&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;highveld&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Highveld&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;as.character&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Highveld&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# And we do the same for Gauteng&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Gauteng&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;point.in.polygon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Longitude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Latitude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gauteng&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gauteng&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Gauteng&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;as.character&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Gauteng&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;After running this the df should look something like this&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-csv&quot; data-lang=&quot;csv&quot;&gt;Date     ;Event;Place                             ;Latitude;Longitude;Height (m); Highveld;Gauteng
2014/2/3 ;Rain/flooding ;JOHANNESBURG; GAUTENG    ;-26.12; 28.02;    1749;        1;       1
2014/2/3 ;Rain/flooding ;SOWETO; GAUTENG          ;-26.14; 26.15;    1646;        1;       0
2014/2/3 ;Rain/flooding ;LENASIA; GAUTENG         ;-26.2;  27.51;    1574;        1;       1
2014/2/3 ;Rain/flooding ;TEMBISA; GAUTENG         ;-26;    28.12;    16  ;        1;       1
2014/2/3 ;Rain/flooding ;MIDRAND; GAUTENG         ;-25.56; 28.08;    1539;        0;       1
2014/2/3 ;Rain/flooding ;CENTURION; GAUTENG       ;-25.51; 28.11;    1432;        0;       1
2014/2/3 ;Rain/flooding ;RANDBURG; GAUTENG        ;-26.08; 27.59;    1603;        1;       1
2014/2/3 ;Rain/flooding ;ROODEPOORT; GAUTENG      ;-26.07; 27.54;    1747;        1;       1
2014/2/3 ;Rain/flooding ;ALEXANDRA; GAUTENG       ;-26.06; 28.05;    1546;        1;       1
2014/2/3 ;Rain/flooding ;KRUGERSDORP; GAUTENG     ;-26.07; 27.54;    1727;        1;       1
2014/2/3 ;Rain/flooding ;MAKHADO; LIMPOPO         ;-23.02; 29.54;    950 ;        0;       0
2014/2/3 ;Rain/flooding ;THOHOYANDOU; LIMPOPO     ;-22.52; 30.28;    741 ;        0;       0
2014/2/3 ;Rain/flooding ;DELAREYVILLE; NORTH-WEST ;-26.41; 25.27;    1349;        0;       0
2014/2/3 ;Rain/flooding ;OTTOSDAL; NORTH-WEST     ;-26.48; 26;       1504;        1;       0
2014/2/3 ;Rain/flooding ;VRYBURG; NORTH-WEST      ;-26.57; 24.43;    1199;        0;       0
2014/2/3 ;Rain/flooding ;WOLMARANSTAD; NORTH-WEST ;-27.12; 25.58;    1356;        1;       0
2014/2/3 ;Rain/flooding ;TSWAING; NORTH-WEST      ;-26.39; 25.46;    1405;        1;       0
2010/2/3 ;Other         ;MAGALIESBERG             ;-26   ; 27. 55;   1480;        0;       1
2014/2/3 ;Other         ;LANSERIA; GAUTENG        ;-25.26; 27.55;    1362;        0;       0&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Now we can create a new dataframe to work with that only contains the data that
falls within the polygons of interest&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;n&quot;&gt;df_hv&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Highveld&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df_gp&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Gauteng&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;</content><author><name></name></author><summary type="html">I encountered an issue where I wanted to extract points located within a specific shapefile, in this case the Highveld ecoregion and Gauteng. Instead of extracting the points in R I assign them a 1/0 (TRUE/FALSE) value in a new column using point.in.polygon, following this I the filter function in R to create a new dataframe where Highveld == 1. In theory you could use the over function which is part of the rgdal package, but I found this cumbersome.</summary></entry><entry><title type="html">Multisheet spreadsheets in R</title><link href="http://localhost:4000/r/2019/02/19/excel-mulitsheet-in-R.html" rel="alternate" type="text/html" title="Multisheet spreadsheets in R" /><published>2019-02-19T09:40:29+02:00</published><updated>2019-02-19T09:40:29+02:00</updated><id>http://localhost:4000/r/2019/02/19/excel-mulitsheet-in-R</id><content type="html" xml:base="http://localhost:4000/r/2019/02/19/excel-mulitsheet-in-R.html">&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data.table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;import_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;filewithatonoftabs.xlsx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;There is 76 tabs in this sheet – F*ck.&lt;/p&gt;

&lt;p&gt;Write a for loop in bash&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;i &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;1..76&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\$&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;Sheet&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;,&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;And paste the result in rbindlist to create a workable df.
I only did the bash loop becuase my R loop was not working&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;n&quot;&gt;df_working&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rbindlist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet17&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet19&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet26&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet29&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet31&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet33&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet34&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet36&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet37&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet38&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet39&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet41&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet43&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet44&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet45&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet46&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet47&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet49&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet51&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet52&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet53&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet54&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet55&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet56&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet57&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet58&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet59&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet60&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet61&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet62&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet63&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet65&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet66&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet67&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet68&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet69&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet70&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet71&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet72&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet73&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet74&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet75&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sheet76&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;order&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClimNo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Save the csv so you wont have to repeat this&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write.csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df_working&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;./yourfile.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row.names&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;</content><author><name></name></author><summary type="html">library(rio) library(data.table) df &amp;lt;- import_list(&quot;filewithatonoftabs.xlsx&quot;)</summary></entry><entry><title type="html">Shapefiles in R - extracting polygons</title><link href="http://localhost:4000/r/2019/02/17/shapefiles-in-R-2.html" rel="alternate" type="text/html" title="Shapefiles in R - extracting polygons" /><published>2019-02-17T09:40:29+02:00</published><updated>2019-02-17T09:40:29+02:00</updated><id>http://localhost:4000/r/2019/02/17/shapefiles-in-R-2</id><content type="html" xml:base="http://localhost:4000/r/2019/02/17/shapefiles-in-R-2.html">&lt;p&gt;This builds on the previous post &lt;em&gt;Shapefiles in R - making a basic map&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;In QGIS or ArcGIS is pretty easy to extract part of a shapefile. Generally you
can open shapefile attribute table and select the feature you want and delete
the rest. In R it’s also pretty easy, but &lt;em&gt;less mouse clicking and more typing&lt;/em&gt;
kinda easy.&lt;/p&gt;

&lt;p&gt;In R do:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rgdal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rgeos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theme_set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theme_classic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;base_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#Define the basemap as basemap, where dsn == the directory where the shapefile&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#is located. For ggplot use map_data function:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basemap&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readOGR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dsn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;./&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ZAF_adm1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#To actually work with the shapefiles, omit the map_data function&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#and invoke it later&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basemap_1&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readOGR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dsn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;./&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ZAF_adm1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ecoregions&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readOGR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dsn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;./&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Ecoregions2017&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# To extract a layer to use in a plot, in this case Gauteng and the Highveld,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# do:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gauteng&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basemap_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basemap_1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NAME_1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Gauteng&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;highveld&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ecoregions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ecoregions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ECO_ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;81&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Get the map extent for the boundries&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;summary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;highveld&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;summary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gauteng&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt_hv&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;highveld&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coord_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-23.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-32.6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;31.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggtitle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Highveld&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylab&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Latitude&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlab&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Longitude&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt_gp&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gauteng&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coord_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-25.1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-26.95&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;29.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggtitle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Gauteng&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylab&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Latitude&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlab&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Longitude&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#To see the map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt_gp&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt_highveld&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#To see the map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;png&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Highveld.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt_hv&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dev.off&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;png&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Gauteng.png&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt_gp&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dev.off&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The maps:
&lt;img src=&quot;http://localhost:4000/assets/images/maps/Highveld.png&quot; alt=&quot;gmtmap&quot; /&gt;
&lt;img src=&quot;http://localhost:4000/assets/images/maps/Gauteng.png&quot; alt=&quot;gmtmap&quot; /&gt;&lt;/p&gt;</content><author><name></name></author><summary type="html">This builds on the previous post Shapefiles in R - making a basic map.</summary></entry><entry><title type="html">Shapefiles in R - making a basic map</title><link href="http://localhost:4000/writing/2019/02/13/shapefiles-in-R.html" rel="alternate" type="text/html" title="Shapefiles in R - making a basic map" /><published>2019-02-13T12:43:29+02:00</published><updated>2019-02-13T12:43:29+02:00</updated><id>http://localhost:4000/writing/2019/02/13/shapefiles-in-R</id><content type="html" xml:base="http://localhost:4000/writing/2019/02/13/shapefiles-in-R.html">&lt;p&gt;I’ve been using R in my daily doings more and more and as a student in the
&lt;em&gt;geo-sciences&lt;/em&gt; making maps is pretty important. My first love is still GMT, but
R is proving useful and this is just a brief note on how to make a very simple
map using R and ggplot2.&lt;/p&gt;

&lt;p&gt;Get the shapefile:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;wget http://biogeo.ucdavis.edu/data/gadm2.8/shp/ZAF_adm_shp.zip
unzip ZAF_adm_shp.zip&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Install these packages (I’m lazy, so I just use the wildcard)&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt install r-base-core libgdal&lt;span class=&quot;se&quot;&gt;\*&lt;/span&gt; libproj&lt;span class=&quot;se&quot;&gt;\*&lt;/span&gt; libgeos&lt;span class=&quot;se&quot;&gt;\*&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Open R and first do:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;n&quot;&gt;install.packages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ggplot2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;rgdal&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;rgeos&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;maps&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;sp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;The needed packages should be installed. Load the libraries and read the
shapefiles. In this case &lt;em&gt;ZAF_adm1&lt;/em&gt; is South-Africa’s provincial demarcations.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rgdal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rgeos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theme_set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theme_classic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;base_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#Define the basemap as basemap, where dsn == the directory where the shapefile&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#is located&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basemap&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readOGR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dsn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;southafrica&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ZAF_adm1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#We can get some stats on the basemap to set our boundaries&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#summary(basemap)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#      long            lat             group           order       &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Min.   :16.45   Min.   :-34.84   Min.   : 1.00   Min.   :     1  &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 1st Qu.:20.82   1st Qu.:-31.34   1st Qu.:10.00   1st Qu.: 90332  &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Median :27.00   Median :-29.93   Median :18.00   Median :180662  &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Mean   :25.51   Mean   :-29.54   Mean   :23.19   Mean   :180667  &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# 3rd Qu.:29.48   3rd Qu.:-27.31   3rd Qu.:29.00   3rd Qu.:270994  &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Max.   :32.89   Max.   :-22.13   Max.   :55.00   Max.   :361342  &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#    region           subregion        &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Length:361288      Length:361288     &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Class :character   Class :character  &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Mode  :character   Mode  :character  &lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basemap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coord_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;33&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggtitle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;South-Africa&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylab&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Latitude&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlab&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Longitude&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#To see the map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#To save the map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;png&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;SA_Map&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dev.off&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;And tada, a map of South-Africa
&lt;img src=&quot;http://localhost:4000/assets/images/maps/BaseMap_R.png&quot; alt=&quot;gmtmap&quot; /&gt;&lt;/p&gt;

&lt;p&gt;To add points in the map you can do&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;annotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;28.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-25.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;PTA&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;annotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;point&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;28.2293&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-25.7479&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colour&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;red&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;or if you have a file with a ton of lat/lon points&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;c1&quot;&gt;#Assuming they are in a csv file (NAME,LAT,LON)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read.csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cities.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sep&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;header&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;basemap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;long&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LAT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coord_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;-35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;33&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggtitle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;South-Africa&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylab&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Latitude&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlab&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Longitude&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;</content><author><name></name></author><summary type="html">I’ve been using R in my daily doings more and more and as a student in the geo-sciences making maps is pretty important. My first love is still GMT, but R is proving useful and this is just a brief note on how to make a very simple map using R and ggplot2.</summary></entry><entry><title type="html">Writing is hard</title><link href="http://localhost:4000/writing/2019/02/09/writing-is-hard.html" rel="alternate" type="text/html" title="Writing is hard" /><published>2019-02-09T12:43:29+02:00</published><updated>2019-02-09T12:43:29+02:00</updated><id>http://localhost:4000/writing/2019/02/09/writing-is-hard</id><content type="html" xml:base="http://localhost:4000/writing/2019/02/09/writing-is-hard.html">&lt;p&gt;I started this blog with noble intentions, which I still have, but looking at
the date of my last post I am embarrassed by my commitment to it. It’s not that
I’ve lost interest, it’s more a case of very bad &lt;em&gt;imposter syndrome&lt;/em&gt; that came
over me and particularly my writing style. But as with everything I should see
this as practise. The only way to get better is to write more and write
regularly, otherwise you &lt;em&gt;get out of shape&lt;/em&gt;. That’s the same with reading,
exercising, meditating or anything else. The book, Writer’s Home Companion: An
Anthology of the World’s Best Writing Advice, From Keats to Kunitz by &lt;em&gt;Joan
Bolker&lt;/em&gt; , the author makes the same argument and suggest writing exercises by using cues.
Or just even writing randomly for a set time each day about anything that comes
up in your mind. So this post is a little commitment to myself to &lt;em&gt;just write&lt;/em&gt;.
No matter how bad, or how random, I just need to write.&lt;/p&gt;

&lt;p&gt;Ps. I also write in everything directly in vim without any fancy spell or
grammar checker, that kind of makes this a very raw read in a sense.&lt;/p&gt;</content><author><name></name></author><summary type="html">I started this blog with noble intentions, which I still have, but looking at the date of my last post I am embarrassed by my commitment to it. It’s not that I’ve lost interest, it’s more a case of very bad imposter syndrome that came over me and particularly my writing style. But as with everything I should see this as practise. The only way to get better is to write more and write regularly, otherwise you get out of shape. That’s the same with reading, exercising, meditating or anything else. The book, Writer’s Home Companion: An Anthology of the World’s Best Writing Advice, From Keats to Kunitz by Joan Bolker , the author makes the same argument and suggest writing exercises by using cues. Or just even writing randomly for a set time each day about anything that comes up in your mind. So this post is a little commitment to myself to just write. No matter how bad, or how random, I just need to write.</summary></entry><entry><title type="html">Usefull, useless things</title><link href="http://localhost:4000/things/linux/2019/02/09/useless-things-learn-during-the-day.html" rel="alternate" type="text/html" title="Usefull, useless things" /><published>2019-02-09T10:00:29+02:00</published><updated>2019-02-09T10:00:29+02:00</updated><id>http://localhost:4000/things/linux/2019/02/09/useless-things-learn-during-the-day</id><content type="html" xml:base="http://localhost:4000/things/linux/2019/02/09/useless-things-learn-during-the-day.html">&lt;p&gt;Everyday I figure out small things that make life a little easier and don’t fit
in my &lt;em&gt;useful one liners&lt;/em&gt; post , I tend to forget them the moment I’m done
using it or implementing whatever I need it for. This could be anything from
latex to git to bash to vim and in most cases these are just little
conveniences. So I’ll attempt to note these useless things here.&lt;/p&gt;

&lt;h3 id=&quot;adding-metadata-to-latex-pdf&quot;&gt;Adding Metadata to LaTeX pdf&lt;/h3&gt;
&lt;p&gt;This whole post was inspired by right clicking on my thesis and seeing that my
metadata is empty, the fix was pretty easy. Add this to your preamble:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-latex&quot; data-lang=&quot;latex&quot;&gt;&lt;span class=&quot;k&quot;&gt;\usepackage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;hyperref&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;\hypersetup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    pdftitle=&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;LaTeX is for cool kids&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;,
    pdfsubject=&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;Not Computer Science&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;,
    pdfauthor=&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;Henno Havenga&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;,
    pdfkeywords=&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;LaTeX, VIM, Debian, GNU, Linux&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;plotting-a-tif-file-with-gmt&quot;&gt;Plotting a tif file with GMT&lt;/h3&gt;
&lt;p&gt;I needed to clip a &lt;a href=&quot;https://visibleearth.nasa.gov/view_cat.php?categoryID=1484&quot;&gt;NASA Blue
Marble&lt;/a&gt; tif file.
I wanted to use &lt;em&gt;gdal_tanslate&lt;/em&gt; but a not so quick search yield
&lt;a href=&quot;https://joeyklee.github.io/broc-cli-geo/guide/XX_raster_cropping_and_clipping.html&quot;&gt;&lt;em&gt;gdalwarp&lt;/em&gt;&lt;/a&gt;
as a simpler option. Also note that the default NASA projection is Plate Carrée
(JQ in GMT), this is useful to know if you want to draw borders over the NASA
data using GMT without thinking to much about conversions. To clip the data
I used gdalwarp and then GMT’s psimage module to overlay the image on a map:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;gdalwarp &lt;span class=&quot;nt&quot;&gt;-te&lt;/span&gt; 15 59 38 71 blue_marble_infile.tif clipped_blue_marble_outfile.tif&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;gmt psbasemap &lt;span class=&quot;nt&quot;&gt;-R15&lt;/span&gt;/38/59/71.5 &lt;span class=&quot;nt&quot;&gt;-JQ20&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Xc&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Yc&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-B5a0&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; image_map.ps
gmt psimage clipped_blue_marble_outfile.tif &lt;span class=&quot;nt&quot;&gt;-DjCM&lt;/span&gt;+w20/11.1 &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; image_map.ps&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;linking-to-most-recent-eumetsat-products-in-markdown&quot;&gt;Linking to most recent EUMETSAT products in markdown&lt;/h3&gt;
&lt;p&gt;In playing around with this site I thought about make a page dedicated weather
stuff, it was pretty easy to link directly to EUMETSAT products with markdown
by just copying the image link like this:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-markdown&quot; data-lang=&quot;markdown&quot;&gt;    &lt;span class=&quot;nt&quot;&gt;&amp;lt;center&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;align=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;center&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;valign=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;center&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt; &amp;lt;img
    SRC=&quot;http://oiswww.eumetsat.org/IPPS/html/latestImages/EUMETSAT_MSG_RGBNatColour_LowResolution.jpg&quot;
    alt=&quot;description here&quot; /&amp;gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;br&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt; EUMETSAT RGB Africa. &lt;span class=&quot;nt&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/tr&amp;gt;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;/center&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;center&gt; &lt;td align=&quot;center&quot; valign=&quot;center&quot;&gt; &lt;img src=&quot;http://oiswww.eumetsat.org/IPPS/html/latestImages/EUMETSAT_MSG_RGBNatColour_LowResolution.jpg&quot; alt=&quot;description here&quot; /&gt; &lt;br /&gt; EUMETSAT RGB Africa. &lt;/td&gt; &lt;/center&gt;

&lt;h3 id=&quot;array-in-bash&quot;&gt;Array in bash&lt;/h3&gt;

&lt;p&gt;To work with arrays in bash you must call the array variable 
“${array[@]}”&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;12 18 24 30 36 42 48&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;count &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[@]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;do 
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;making-barcodes&quot;&gt;Making barcodes&lt;/h3&gt;
&lt;p&gt;Making barcodes in Linux is very easy, install barcode, run the command convert the ps file to pdf using ps2pdf&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt install barcode
barcode &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 3x6 &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; Oatmeal 128 &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; output.ps
ps2pdf output.ps oatmealbarcode.pdf&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;</content><author><name></name></author><summary type="html">Everyday I figure out small things that make life a little easier and don’t fit in my useful one liners post , I tend to forget them the moment I’m done using it or implementing whatever I need it for. This could be anything from latex to git to bash to vim and in most cases these are just little conveniences. So I’ll attempt to note these useless things here.</summary></entry><entry><title type="html">My msc in a nutshell</title><link href="http://localhost:4000/thesis/weather/2018/05/14/msc-in-a-poster.html" rel="alternate" type="text/html" title="My msc in a nutshell" /><published>2018-05-14T12:43:29+02:00</published><updated>2018-05-14T12:43:29+02:00</updated><id>http://localhost:4000/thesis/weather/2018/05/14/msc-in-a-poster</id><content type="html" xml:base="http://localhost:4000/thesis/weather/2018/05/14/msc-in-a-poster.html">&lt;p&gt;I recently finished my masters dissertation on hailstorms over South-Africa and
decided to make a poster summary of my work. I mostly wanted to make a cool map
and decided to do this for fun.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/maps/hail_poster.png&quot; alt=&quot;hail_poster&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The script is quite long and I used it for some work in my thesis before
I really figured out loops, so it could be simplified a lot, I’m too lazy to do
that now. The only other thing I changed is I removed the complete ECMWF python
part, it was just a repeating to get reanalysis data for every case.
Here you go:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#####################################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# This is to make a synotpic map                   #&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# http://gmt.soest.hawaii.edu/boards/1/topics/5997 #&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#####################################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#####################################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;## Step 1: Download the ERA-DATA with this script   #&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#####################################################&lt;/span&gt;

python &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
from ecmwfapi import ECMWFDataServer
server = ECMWFDataServer()
server.retrieve({
server.retrieve({
    &quot;class&quot;: &quot;ei&quot;,
    &quot;dataset&quot;: &quot;interim&quot;,
    &quot;date&quot;: &quot;2011-10-19/to/2011-10-19&quot;,
    &quot;expver&quot;: &quot;1&quot;,
    &quot;grid&quot;: &quot;0.75/0.75&quot;,
    &quot;levtype&quot;: &quot;sfc&quot;,
    &quot;param&quot;: &quot;151.128&quot;,
    &quot;step&quot;: &quot;0&quot;,
    &quot;stream&quot;: &quot;oper&quot;,
    &quot;time&quot;: &quot;12:00:00&quot;,
    &quot;type&quot;: &quot;an&quot;,
    &quot;format&quot;:&quot;netcdf&quot;,
    &quot;target&quot;: &quot;msl.nc&quot;,
})

server.retrieve({
    &quot;class&quot;: &quot;ei&quot;,
    &quot;dataset&quot;: &quot;interim&quot;,
    &quot;date&quot;: &quot;2011-10-19/to/2011-10-19&quot;,
    &quot;expver&quot;: &quot;1&quot;,
    &quot;grid&quot;: &quot;0.75/0.75&quot;,
    &quot;levtype&quot;: &quot;sfc&quot;,
    &quot;param&quot;: &quot;59.128&quot;,
    &quot;step&quot;: &quot;12&quot;,
    &quot;stream&quot;: &quot;oper&quot;,
    &quot;time&quot;: &quot;00:00:00&quot;,
    &quot;type&quot;: &quot;fc&quot;,
    &quot;format&quot;:&quot;netcdf&quot;,
    &quot;target&quot;: &quot;cape.nc&quot;,
})

server.retrieve({
    &quot;class&quot;: &quot;ei&quot;,
    &quot;dataset&quot;: &quot;interim&quot;,
    &quot;date&quot;: &quot;2011-10-19/to/2011-10-19&quot;,
    &quot;expver&quot;: &quot;1&quot;,
    &quot;grid&quot;: &quot;0.75/0.75&quot;,
    &quot;levelist&quot;: &quot;500&quot;,
    &quot;levtype&quot;: &quot;pl&quot;,
    &quot;param&quot;: &quot;129.128&quot;,
    &quot;step&quot;: &quot;0&quot;,
    &quot;stream&quot;: &quot;oper&quot;,
    &quot;time&quot;: &quot;12:00:00&quot;,
    &quot;type&quot;: &quot;an&quot;,
    &quot;format&quot;:&quot;netcdf&quot;,
    &quot;target&quot;: &quot;zg500.nc&quot;,
})
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;
EOF

&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;read&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ERA-Data downloaded. Press enter to continue and convert data for use in GMT &quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#############################################################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#  The file is not compatible with GMT, to get it to work do where ?msl     #&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#  selects the variable we want and writes it to mslp.nc. The '' is         #&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#  important otherwise bash looks for a wildcard.                           #&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#  The units are also wrong to correct them we need to use gmt grdmath      #&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#############################################################################&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#########################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#                MSLP                   #&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#########################################&lt;/span&gt;
gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'msl.nc?msl'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gmslp_org&lt;/span&gt;.nc
gmt grdmath mslp_org.nc 100 DIV &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; mslp_nrm.nc

gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'msl2.nc?msl'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gmslp2_org&lt;/span&gt;.nc
gmt grdmath mslp2_org.nc 100 DIV &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; mslp2_nrm.nc

gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'msl3.nc?msl'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gmslp3_org&lt;/span&gt;.nc
gmt grdmath mslp3_org.nc 100 DIV &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; mslp3_nrm.nc

gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'msl4.nc?msl'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gmslp4_org&lt;/span&gt;.nc
gmt grdmath mslp4_org.nc 100 DIV &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; mslp4_nrm.nc

gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'msl5.nc?msl'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gmslp5_org&lt;/span&gt;.nc
gmt grdmath mslp5_org.nc 100 DIV &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; mslp5_nrm.nc

gmt grdmath mslp_nrm.nc mslp2_nrm.nc ADD mslp3_nrm.nc ADD mslp4_nrm.nc ADD mslp4_nrm.nc ADD 5 DIV &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; mslp_mean.nc

&lt;span class=&quot;c&quot;&gt;#########################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#                CAPE                   #&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#########################################&lt;/span&gt;
gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'cape.nc?cape'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gcape_org&lt;/span&gt;.nc
gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'cape2.nc?cape'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gcape2_org&lt;/span&gt;.nc
gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'cape3.nc?cape'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gcape3_org&lt;/span&gt;.nc
gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'cape4.nc?cape'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gcape4_org&lt;/span&gt;.nc
gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'cape5.nc?cape'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gcape5_org&lt;/span&gt;.nc

gmt grdmath cape_org.nc cape2_org.nc ADD cape3_org.nc ADD cape4_org.nc ADD cape5_org.nc ADD 5 DIV &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; cape_mean.nc

&lt;span class=&quot;c&quot;&gt;##########################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#           Mask some values             #&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;##########################################&lt;/span&gt;
gmt grdclip cape_mean.nc &lt;span class=&quot;nt&quot;&gt;-Sb250&lt;/span&gt;/NaN &lt;span class=&quot;nt&quot;&gt;-Sa2500&lt;/span&gt;/2500 &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gcape_mean&lt;/span&gt;.nc 
gmt grdclip cape5_org.nc &lt;span class=&quot;nt&quot;&gt;-Sb250&lt;/span&gt;/NaN &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gcape5_org&lt;/span&gt;.nc 
gmt grdclip cape4_org.nc &lt;span class=&quot;nt&quot;&gt;-Sb250&lt;/span&gt;/NaN &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gcape4_org&lt;/span&gt;.nc 
gmt grdclip cape3_org.nc &lt;span class=&quot;nt&quot;&gt;-Sb250&lt;/span&gt;/NaN &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gcape3_org&lt;/span&gt;.nc 
gmt grdclip cape2_org.nc &lt;span class=&quot;nt&quot;&gt;-Sb250&lt;/span&gt;/NaN &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gcape2_org&lt;/span&gt;.nc 
gmt grdclip cape_org.nc  &lt;span class=&quot;nt&quot;&gt;-Sb250&lt;/span&gt;/NaN &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gcape_org&lt;/span&gt;.nc 

&lt;span class=&quot;c&quot;&gt;##########################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#           Geopotential 500             #&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;##########################################&lt;/span&gt;
gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'zg500.nc?z'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gzg500_org&lt;/span&gt;.nc
gmt grdmath zg500_org.nc 10 DIV &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; zg500_nrm.nc

gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'zg5002.nc?z'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gzg5002_org&lt;/span&gt;.nc
gmt grdmath zg5002_org.nc 10 DIV &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; zg5002_nrm.nc

gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'zg5003.nc?z'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gzg5003_org&lt;/span&gt;.nc
gmt grdmath zg5003_org.nc 10 DIV &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; zg5003_nrm.nc

gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'zg5004.nc?z'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gzg5004_org&lt;/span&gt;.nc
gmt grdmath zg5004_org.nc 10 DIV &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; zg5004_nrm.nc

gmt grdconvert &lt;span class=&quot;s1&quot;&gt;'zg5005.nc?z'&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gzg5005_org&lt;/span&gt;.nc
gmt grdmath zg5005_org.nc 10 DIV &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; zg5005_nrm.nc

gmt grdmath zg500_nrm.nc zg5002_nrm.nc ADD zg5003_nrm.nc ADD zg5004_nrm.nc ADD zg5005_nrm.nc ADD 5 DIV &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; zg500_mean.nc

&lt;span class=&quot;c&quot;&gt;###########################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#               Inspect Data              #&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;###########################################&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;read&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Lets inspect the data with ncdump. Press enter to continue &quot;&lt;/span&gt;
ncdump &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; mslp_mean.nc
ncdump &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; zg500_mean.nc
ncdump &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; cape_mean.nc

&lt;span class=&quot;nb&quot;&gt;read&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Lets inspect the data with grdinfo. Press enter to continue &quot;&lt;/span&gt;
gmt grdinfo mslp_mean.nc
gmt grdinfo zg500_mean.nc
gmt grdinfo cape_mean.nc

&lt;span class=&quot;c&quot;&gt;####################################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Here we create a very basic map to view our data #&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;####################################################&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;read&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Lets create a world map. Press enter to continue &quot;&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'MSLP map '&lt;/span&gt;
gmt grdimage mslp_mean.nc &lt;span class=&quot;nt&quot;&gt;-JX25&lt;/span&gt;/0d &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; mslp.ps
gmt pscoast &lt;span class=&quot;nt&quot;&gt;-Rmslp_mean&lt;/span&gt;.nc &lt;span class=&quot;nt&quot;&gt;-JX&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt;.5 &lt;span class=&quot;nt&quot;&gt;-N3&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Dc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; mslp.ps

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'CAPE map '&lt;/span&gt;
gmt grdimage cape_mean.nc &lt;span class=&quot;nt&quot;&gt;-JX25&lt;/span&gt;/0d &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; cape.ps
gmt pscoast &lt;span class=&quot;nt&quot;&gt;-Rcape_mean&lt;/span&gt;.nc &lt;span class=&quot;nt&quot;&gt;-JX&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt;.5 &lt;span class=&quot;nt&quot;&gt;-N3&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Dc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; cape.ps

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Geopotential map '&lt;/span&gt;
gmt grdimage zg500_mean.nc &lt;span class=&quot;nt&quot;&gt;-JX25&lt;/span&gt;/0d &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; zg500.ps
gmt pscoast &lt;span class=&quot;nt&quot;&gt;-Rzg500_mean&lt;/span&gt;.nc &lt;span class=&quot;nt&quot;&gt;-JX&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt;.5 &lt;span class=&quot;nt&quot;&gt;-N3&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Dc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; zg500.ps

&lt;span class=&quot;nb&quot;&gt;read&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;World map created. Lets create a map of South-Africa. Press enter to continue &quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;####################################################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#    Now we need to create a map from the netcdf file for SA       #&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;####################################################################&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'hail_composite_globe.ps'&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;topo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;./ETOPO1_Ice_g_gmt4.grd

&lt;span class=&quot;c&quot;&gt;#Projection (Lambert Azimuthal Equal-Area)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;25.5

gmt psbasemap  &lt;span class=&quot;nt&quot;&gt;-Rg&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JG25&lt;/span&gt;/-20/40 &lt;span class=&quot;nt&quot;&gt;-X3&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Y3&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Bag&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--PS_MEDIA&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;50.94cx80.41c &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt makecpt    &lt;span class=&quot;nt&quot;&gt;-Crainbow&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-T200&lt;/span&gt;/2550/100 &lt;span class=&quot;nt&quot;&gt;-Z&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; cape.cpt
gmt psscale    &lt;span class=&quot;nt&quot;&gt;-Ccape&lt;/span&gt;.cpt &lt;span class=&quot;nt&quot;&gt;-D6&lt;/span&gt;.5c/0.5c+w12c/0.5c+jTC+h &lt;span class=&quot;nt&quot;&gt;-Bxaf&lt;/span&gt;+l&lt;span class=&quot;s2&quot;&gt;&quot;CAPE J/Kg&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt makecpt    &lt;span class=&quot;nt&quot;&gt;-Cglobe&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-T-10000&lt;/span&gt;/10000/100 &lt;span class=&quot;nt&quot;&gt;-Z&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; topo.cpt
gmt grdimage    &lt;span class=&quot;nv&quot;&gt;$topo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Ctopo&lt;/span&gt;.cpt &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt pscoast    &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Na&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-I1&lt;/span&gt;/0.25p,skyblue3 &lt;span class=&quot;nt&quot;&gt;-I2&lt;/span&gt;/0.25p,skyblue3 &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdimage    cape_mean.nc &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Ccape&lt;/span&gt;.cpt &lt;span class=&quot;nt&quot;&gt;-Q&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt; 
gmt pscoast    &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-N1&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-B&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Lx7&lt;/span&gt;.5/-2+c-26.5+w4500k+f &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdcontour &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt;,-- mslp_mean.nc &lt;span class=&quot;nt&quot;&gt;-S4&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-C2&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-A2&lt;/span&gt;+f12 &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt;+lLH &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdcontour &lt;span class=&quot;nt&quot;&gt;-W1&lt;/span&gt;.7 zg500_mean.nc &lt;span class=&quot;nt&quot;&gt;-A100&lt;/span&gt;+f18 &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-C100&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gn1&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt psxy       ZAF_adm1.gmt &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt;.05 &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Start plotting the individual days&lt;/span&gt;
gmt psbasemap  &lt;span class=&quot;nt&quot;&gt;-R15&lt;/span&gt;/34/-36/-21 &lt;span class=&quot;nt&quot;&gt;-JM10&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Bn&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-X42&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Y0&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdimage    &lt;span class=&quot;nv&quot;&gt;$topo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Ctopo&lt;/span&gt;.cpt &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt pscoast    &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Na&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-I1&lt;/span&gt;/0.25p,skyblue3 &lt;span class=&quot;nt&quot;&gt;-I2&lt;/span&gt;/0.25p,skyblue3 &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdimage   cape5_org.nc &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Ccape&lt;/span&gt;.cpt &lt;span class=&quot;nt&quot;&gt;-Q&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt; 
gmt grdcontour &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt;,-- mslp5_nrm.nc &lt;span class=&quot;nt&quot;&gt;-S4&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-C2&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-A2&lt;/span&gt;+f12 &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt;+lLH &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdcontour &lt;span class=&quot;nt&quot;&gt;-W1&lt;/span&gt;.7 zg5005_nrm.nc &lt;span class=&quot;nt&quot;&gt;-A150&lt;/span&gt;+f16 &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-C150&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gn1&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt psxy       ZAF_adm1.gmt &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt;.05 &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;34 -34 19/10/2011&quot;&lt;/span&gt; | gmt pstext &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt;+jTR+f16 &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gwhite&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W1p&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Dj0&lt;/span&gt;.1 &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;

gmt psbasemap  &lt;span class=&quot;nt&quot;&gt;-R15&lt;/span&gt;/34/-36/-21 &lt;span class=&quot;nt&quot;&gt;-JM10&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Bn&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Y10&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdimage    &lt;span class=&quot;nv&quot;&gt;$topo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Ctopo&lt;/span&gt;.cpt &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt pscoast    &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Na&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-I1&lt;/span&gt;/0.25p,skyblue3 &lt;span class=&quot;nt&quot;&gt;-I2&lt;/span&gt;/0.25p,skyblue3 &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdimage   cape4_org.nc &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Ccape&lt;/span&gt;.cpt &lt;span class=&quot;nt&quot;&gt;-Q&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt; 
gmt grdcontour &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt; mslp4_nrm.nc &lt;span class=&quot;nt&quot;&gt;-S4&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-C2&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-A2&lt;/span&gt;+f12 &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt;+lLH &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdcontour &lt;span class=&quot;nt&quot;&gt;-W1&lt;/span&gt;.7 zg5004_nrm.nc &lt;span class=&quot;nt&quot;&gt;-A150&lt;/span&gt;+f16 &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-C150&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gn1&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt psxy       ZAF_adm1.gmt &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt;.05 &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;34 -34 08/11/2012&quot;&lt;/span&gt; | gmt pstext &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt;+jTR+f16 &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gwhite&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W1p&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Dj0&lt;/span&gt;.1 &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;

gmt psbasemap  &lt;span class=&quot;nt&quot;&gt;-R15&lt;/span&gt;/34/-36/-21 &lt;span class=&quot;nt&quot;&gt;-JM10&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Bn&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-X11&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Y0&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdimage    &lt;span class=&quot;nv&quot;&gt;$topo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Ctopo&lt;/span&gt;.cpt &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt pscoast    &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Na&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-I1&lt;/span&gt;/0.25p,skyblue3 &lt;span class=&quot;nt&quot;&gt;-I2&lt;/span&gt;/0.25p,skyblue3 &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdimage   cape3_org.nc &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Ccape&lt;/span&gt;.cpt &lt;span class=&quot;nt&quot;&gt;-Q&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt; 
gmt grdcontour &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt; mslp3_nrm.nc &lt;span class=&quot;nt&quot;&gt;-S4&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-C2&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-A2&lt;/span&gt;+f12 &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt;+lLH &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdcontour &lt;span class=&quot;nt&quot;&gt;-W1&lt;/span&gt;.7 zg5003_nrm.nc &lt;span class=&quot;nt&quot;&gt;-A150&lt;/span&gt;+f16 &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-C150&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gn1&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt psxy       ZAF_adm1.gmt &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt;.05 &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;34 -34 09/11/2012&quot;&lt;/span&gt; | gmt pstext &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt;+jTR+f16 &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gwhite&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W1p&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Dj0&lt;/span&gt;.1 &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;

gmt psbasemap  &lt;span class=&quot;nt&quot;&gt;-R15&lt;/span&gt;/34/-36/-21 &lt;span class=&quot;nt&quot;&gt;-JM10&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Bn&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-X-11&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Y10&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdimage    &lt;span class=&quot;nv&quot;&gt;$topo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Ctopo&lt;/span&gt;.cpt &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt pscoast    &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Na&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-I1&lt;/span&gt;/0.25p,skyblue3 &lt;span class=&quot;nt&quot;&gt;-I2&lt;/span&gt;/0.25p,skyblue3 &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdimage   cape2_org.nc &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Ccape&lt;/span&gt;.cpt &lt;span class=&quot;nt&quot;&gt;-Q&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt; 
gmt grdcontour &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt; mslp2_nrm.nc &lt;span class=&quot;nt&quot;&gt;-S4&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-C2&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-A2&lt;/span&gt;+f12 &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt;+lLH &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdcontour &lt;span class=&quot;nt&quot;&gt;-W1&lt;/span&gt;.7 zg5002_nrm.nc &lt;span class=&quot;nt&quot;&gt;-A150&lt;/span&gt;+f16 &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-C150&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gn1&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt psxy       ZAF_adm1.gmt &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt;.05 &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;34 -34 11/11/2013&quot;&lt;/span&gt; | gmt pstext &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt;+jTR+f16 &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gwhite&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W1p&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Dj0&lt;/span&gt;.1 &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;

gmt psbasemap  &lt;span class=&quot;nt&quot;&gt;-R15&lt;/span&gt;/34/-36/-21 &lt;span class=&quot;nt&quot;&gt;-JM10&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Bn&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-X11&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Y0&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdimage    &lt;span class=&quot;nv&quot;&gt;$topo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Ctopo&lt;/span&gt;.cpt &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt pscoast    &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Na&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-I1&lt;/span&gt;/0.25p,skyblue3 &lt;span class=&quot;nt&quot;&gt;-I2&lt;/span&gt;/0.25p,skyblue3 &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdimage   cape_org.nc &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Ccape&lt;/span&gt;.cpt &lt;span class=&quot;nt&quot;&gt;-Q&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt; 
gmt grdcontour &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt; mslp_nrm.nc &lt;span class=&quot;nt&quot;&gt;-S4&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-C2&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-A2&lt;/span&gt;+f12 &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt;+lLH &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt grdcontour &lt;span class=&quot;nt&quot;&gt;-W1&lt;/span&gt;.7 zg500_nrm.nc &lt;span class=&quot;nt&quot;&gt;-A150&lt;/span&gt;+f16 &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-C150&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gn1&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
gmt psxy       ZAF_adm1.gmt &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt;.05 &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;34 -34 28/11/2013&quot;&lt;/span&gt; | gmt pstext &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt;+jTR+f16 &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Gwhite&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W1p&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Dj0&lt;/span&gt;.1 &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;

gmt logo &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-DjTR&lt;/span&gt;+o-0/10+w10 &lt;span class=&quot;nt&quot;&gt;-Y-11&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$out&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;</content><author><name></name></author><summary type="html">I recently finished my masters dissertation on hailstorms over South-Africa and decided to make a poster summary of my work. I mostly wanted to make a cool map and decided to do this for fun.</summary></entry><entry><title type="html">Retriving point values from GFS data</title><link href="http://localhost:4000/visualizations/gfs/weather/2018/04/14/getting-point-data-from-gfs.html" rel="alternate" type="text/html" title="Retriving point values from GFS data" /><published>2018-04-14T12:43:29+02:00</published><updated>2018-04-14T12:43:29+02:00</updated><id>http://localhost:4000/visualizations/gfs/weather/2018/04/14/getting-point-data-from-gfs</id><content type="html" xml:base="http://localhost:4000/visualizations/gfs/weather/2018/04/14/getting-point-data-from-gfs.html">&lt;p&gt;I guess I can safely say most of time is dedicated to making our &lt;a href=&quot;http://www.lekwenaradar.co.za&quot;&gt;radar
website&lt;/a&gt; cooler. I’m pretty lucky. So we
currently have three things on the website, the radar (obviously), and then two
&lt;a href=&quot;http://www.lekwenaradar.co.za/forecast.html&quot;&gt;GFS visualizations&lt;/a&gt;. The first is
a synoptic scale map of the circulation around South-Africa, mainly mimicking
the &lt;a href=&quot;http://www.weathersa.co.za/observations/synoptic-charts&quot;&gt;South-African Weather Service (SAWS) Synoptic
Map&lt;/a&gt;, but the SAWS is
not as lazy as me so my maps are drawn by a computer and not by hand. The
second product, and I’m fond of this, is the general circulation of the
Southern-Hemisphere. These maps were inspired by the work of &lt;a href=&quot;https://scholar.google.com/scholar?hl=en&amp;amp;as_sdt=0%2C5&amp;amp;q=harry+von+loon&amp;amp;oq=harry+von+loon&quot;&gt;Harry von
Loon&lt;/a&gt;
and &lt;a href=&quot;https://scholar.google.com/scholar?hl=en&amp;amp;as_sdt=0%2C5&amp;amp;q=jj+taljaardt+synoptic&amp;amp;btnG=&quot;&gt;JJ
Taljaard&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Now, here comes the actual reason I’m writing this. The third map that’s
currently in experimental phase is a provincial scale map. I wanted to achieve
two things; (1) allow people to more clearly what’s happing in their little
part of the word, this is not really clear on the synoptic map, and (2) give
people values they can understand more accurately and not rely on interpreting
a scale, by value I mean a number. The map themselves are made with the same
script as the other maps, well more or less the same, and you can read on that
&lt;a href=&quot;https://www.hennohavenga.com/weather/bash/gmt/2018/01/28/forecasting-weather-with-bash-and-other-linux-tools.html&quot;&gt;here&lt;/a&gt;.
This post details how to get a value of a Lat/Lon point from GFS data, and in this case minimum and maximum temperature.&lt;/p&gt;

&lt;p&gt;First we need to grap the GFS data, this pretty simple with wget. I assumed two
things here, rightly or wrongly so, (1) that 0600 gfs product will be an
accurate reflection of the day’s minimum temperature and (2) that 1200 will be
an accurate reflection of the day’s maximum temperature. My notes in the script
should make it obvious what’s being done at each stage, but the most important
is to convert the data to netcdf and then make the values human friendly
(Kelvin -&amp;gt; Celsius). I use the Apparent Temperature at 1200 as the map background.
We’re not trying to make an animation here instead just a one day static map that’s
updated every morning.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;today&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;date +&lt;span class=&quot;s2&quot;&gt;&quot;%Y%m%d00&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;gfs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;http://www.ftp.ncep.noaa.gov/data/nccf/com/gfs/prod/gfs
&lt;span class=&quot;nv&quot;&gt;forecast&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;06 12&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Loop through the specified forecast times wanted and grab GFS data&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;i &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;forecast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[@]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;do 
    &lt;/span&gt;wget &lt;span class=&quot;nv&quot;&gt;$gfs&lt;/span&gt;.&lt;span class=&quot;nv&quot;&gt;$today&lt;/span&gt;/gfs.t00z.pgrb2.0p25.f0&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# For archive purposes we clip the data to South-Africa with cdo&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# and convert GFS files to workable netcdf files&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;i &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;forecast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[@]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;  
&lt;span class=&quot;k&quot;&gt;do 
    &lt;/span&gt;cdo &lt;span class=&quot;nt&quot;&gt;-sellonlatbox&lt;/span&gt;,-180,180,-95,0 gfs.t00z.pgrb2.0p25.f0&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt; gfs.&lt;span class=&quot;nv&quot;&gt;$today&lt;/span&gt;.&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt; 
    cdo &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; nc copy gfs.&lt;span class=&quot;nv&quot;&gt;$today&lt;/span&gt;.&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt; ncfile&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;.nc 
&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# To plot the files in GMT we need to get the variables from the newly &lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# created netcdf files by extracting only the variable we want.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;i &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;forecast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[@]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;do
    &lt;/span&gt;gmt grdconvert ncfile&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;.nc&lt;span class=&quot;se&quot;&gt;\?&lt;/span&gt;aptmp &lt;span class=&quot;nt&quot;&gt;-Gaptmp&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;.nc
    gmt grdconvert ncfile&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;.nc&lt;span class=&quot;se&quot;&gt;\?&lt;/span&gt;tmax  &lt;span class=&quot;nt&quot;&gt;-Gtmax&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;.nc
    gmt grdconvert ncfile&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;.nc&lt;span class=&quot;se&quot;&gt;\?&lt;/span&gt;tmin  &lt;span class=&quot;nt&quot;&gt;-Gtmin&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;.nc
&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Do some math&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# We convert Kelvin to Celsius&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;i &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;forecast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[@]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 
&lt;span class=&quot;k&quot;&gt;do
    &lt;/span&gt;gmt grdmath aptmp&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;.nc 273.15 SUB &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; aptmp&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;.nc
    gmt grdmath tmax&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;.nc 273.15 SUB &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; tmax&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;.nc
    gmt grdmath tmin&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;.nc 273.15 SUB &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; tmin&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;.nc
&lt;span class=&quot;k&quot;&gt;done

&lt;/span&gt;rm gfs&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; ncfile&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; tmin12.nc tmax06.nc aptmp06.nc&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;This gives us three values; tmin06.nc tmax12.nc and aptmp12.nc (the aptmp just
serves as the background map, so no need to care too much). To get the values is
the next part. Here we use &lt;strong&gt;Climate Data Operators (CDO)&lt;/strong&gt; &lt;strong&gt;outputtab&lt;/strong&gt; function to
get a value on, or very close the specified Lat/Lon point. The value also had to be
easily plotted on a map using GMT’s pstext function, this means I had to hack bash’s
echo function. Here is the script.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Get Temprature values for the following towns in North-West&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;nw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;nwtmp.dat
&lt;span class=&quot;nv&quot;&gt;potchefstroom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;27.09_lat&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-26&lt;/span&gt;.71&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 
&lt;span class=&quot;nv&quot;&gt;rustenburg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;27.25_lat&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-25&lt;/span&gt;.65&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;mafikeng&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;25.65_lat&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-25&lt;/span&gt;.85&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;lichtenburg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;26.10_lat&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-26&lt;/span&gt;.17&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;zeerust&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;26.10_lat&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-25&lt;/span&gt;.55&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;suncity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;27.09_lat&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-25&lt;/span&gt;.34&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;## Get temperature using CDO &lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;27.09 -26.71 12 0 1 LM Potchefstroom&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;cdo outputtab,value,nohead &lt;span class=&quot;nt&quot;&gt;-remapnn&lt;/span&gt;,&lt;span class=&quot;nv&quot;&gt;$potchefstroom&lt;/span&gt; tmin06.nc&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;cdo outputtab,value,nohead &lt;span class=&quot;nt&quot;&gt;-remapnn&lt;/span&gt;,&lt;span class=&quot;nv&quot;&gt;$potchefstroom&lt;/span&gt; tmax12.nc&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt; 
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;27.25 -25.65 12 0 1 LM Rustenburg&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;cdo outputtab,value,nohead &lt;span class=&quot;nt&quot;&gt;-remapnn&lt;/span&gt;,&lt;span class=&quot;nv&quot;&gt;$rustenburg&lt;/span&gt; tmin06.nc&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;cdo outputtab,value,nohead &lt;span class=&quot;nt&quot;&gt;-remapnn&lt;/span&gt;,&lt;span class=&quot;nv&quot;&gt;$rustenburg&lt;/span&gt; tmax12.nc&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt; 
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;25.65 -25.85 12 0 1 LM Mafikeng&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;cdo outputtab,value,nohead &lt;span class=&quot;nt&quot;&gt;-remapnn&lt;/span&gt;,&lt;span class=&quot;nv&quot;&gt;$mafikeng&lt;/span&gt; tmin06.nc&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;cdo outputtab,value,nohead &lt;span class=&quot;nt&quot;&gt;-remapnn&lt;/span&gt;,&lt;span class=&quot;nv&quot;&gt;$mafikeng&lt;/span&gt; tmax12.nc&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt; 
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;26.10 -26.17 12 0 1 LM Lichtenburg&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;cdo outputtab,value,nohead &lt;span class=&quot;nt&quot;&gt;-remapnn&lt;/span&gt;,&lt;span class=&quot;nv&quot;&gt;$lichtenburg&lt;/span&gt; tmin06.nc&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;cdo outputtab,value,nohead &lt;span class=&quot;nt&quot;&gt;-remapnn&lt;/span&gt;,&lt;span class=&quot;nv&quot;&gt;$lichtenburg&lt;/span&gt; tmax12.nc&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt; 
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;26.10 -25.55 12 0 1 LM Zeerust&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;cdo outputtab,value,nohead &lt;span class=&quot;nt&quot;&gt;-remapnn&lt;/span&gt;,&lt;span class=&quot;nv&quot;&gt;$zeerust&lt;/span&gt; tmin06.nc&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;cdo outputtab,value,nohead &lt;span class=&quot;nt&quot;&gt;-remapnn&lt;/span&gt;,&lt;span class=&quot;nv&quot;&gt;$zeerust&lt;/span&gt; tmax12.nc&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt; 
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;27.09 -25.34 12 0 1 LM Sun-City&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;cdo outputtab,value,nohead &lt;span class=&quot;nt&quot;&gt;-remapnn&lt;/span&gt;,&lt;span class=&quot;nv&quot;&gt;$suncity&lt;/span&gt; tmin06.nc&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;cdo outputtab,value,nohead &lt;span class=&quot;nt&quot;&gt;-remapnn&lt;/span&gt;,&lt;span class=&quot;nv&quot;&gt;$suncity&lt;/span&gt; tmax12.nc&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt; 

&lt;span class=&quot;c&quot;&gt;#sed -i 's/\.[0-9]*//g' $nw &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;So GMT reads a point value to plot via pstext as LAT LON FONTSIZE ANGLE
FONTTYPE CAPTION so in this case I needed 27.09 -26.71 12 0 1 LM
Potchefstroom in the script, as you see before every CDO command I echo this
part with the details as needed. The sed command was to remove decimal places,
but at the momement it removes the coordinate decimal places to, which I don’t want.
The output looks like this (named nwtmp.dat):&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;27.09 &lt;span class=&quot;nt&quot;&gt;-26&lt;/span&gt;.71 12 0 1 LM Potchefstroom 12 | 26 
27.25 &lt;span class=&quot;nt&quot;&gt;-25&lt;/span&gt;.65 12 0 1 LM Rustenburg 13 | 28 
25.65 &lt;span class=&quot;nt&quot;&gt;-25&lt;/span&gt;.85 12 0 1 LM Mafikeng 13 | 25 
26.10 &lt;span class=&quot;nt&quot;&gt;-26&lt;/span&gt;.17 12 0 1 LM Lichtenburg 12 | 25 
26.10 &lt;span class=&quot;nt&quot;&gt;-25&lt;/span&gt;.55 12 0 1 LM Zeerust 13 | 27 
27.09 &lt;span class=&quot;nt&quot;&gt;-25&lt;/span&gt;.34 12 0 1 LM Sun-City 14 | 27 &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Now the actual plot comes in, using GMT I do:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;#/bin/bash&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# West/East/South/North&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;nw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;22.4/28.4/-28.12/-24.5

&lt;span class=&quot;c&quot;&gt;# North West&lt;/span&gt;
gmt psbasemap  &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$nw&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-JM25&lt;/span&gt;.5 &lt;span class=&quot;nt&quot;&gt;-Ba&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Xc&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Yc&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; nw.ps
gmt makecpt    &lt;span class=&quot;nt&quot;&gt;-Cjet&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-T-10&lt;/span&gt;/40/0.5 &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; aptmp.cpt
gmt grdimage   &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; aptmp12.nc &lt;span class=&quot;nt&quot;&gt;-Captmp&lt;/span&gt;.cpt &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Q&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; nw.ps
gmt pscoast    &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Sskyblue&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; nw.ps
gmt psxy        ZAF_adm1.gmt &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Wfaint&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; nw.ps
gmt psxy        nwtmp.dat &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-W0&lt;/span&gt;.5 &lt;span class=&quot;nt&quot;&gt;-St0&lt;/span&gt;.65 &lt;span class=&quot;nt&quot;&gt;-Gblack&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-V&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; nw.ps
gmt pstext      nwtmp.dat &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-J&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-X0&lt;/span&gt;.10 &lt;span class=&quot;nt&quot;&gt;-Gwhite&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-K&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; nw.ps&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Here we have our map then&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/maps/nw_temp.png&quot; alt=&quot;nw_temp&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The pixels are a little ugly, the way forward here is to play with grdcontour
and also the cpt file. The eventual plan is to make map like this for every
province, but it takes time to enter the coordinates, as soon as that’s done
it’s easy. Another issue is the .dat file, I need to figure out how to remove
the temperature decimal places, but not the Lat/Lon. I think this is possible
with AWK. I also plan to add MSLP and CAPE values to the output which could be
interesting. It should not be to hard to add anything actually, percentage
cloud cover could also be cool.&lt;/p&gt;

&lt;p&gt;Ps. If you use the script give credit to GMT and CDO.&lt;/p&gt;</content><author><name></name></author><summary type="html">I guess I can safely say most of time is dedicated to making our radar website cooler. I’m pretty lucky. So we currently have three things on the website, the radar (obviously), and then two GFS visualizations. The first is a synoptic scale map of the circulation around South-Africa, mainly mimicking the South-African Weather Service (SAWS) Synoptic Map, but the SAWS is not as lazy as me so my maps are drawn by a computer and not by hand. The second product, and I’m fond of this, is the general circulation of the Southern-Hemisphere. These maps were inspired by the work of Harry von Loon and JJ Taljaard.</summary></entry><entry><title type="html">Making an interactive radar map with GDAL</title><link href="http://localhost:4000/radar/weather/2018/04/08/Interactive-radar-map-with-gdal.html" rel="alternate" type="text/html" title="Making an interactive radar map with GDAL" /><published>2018-04-08T12:43:29+02:00</published><updated>2018-04-08T12:43:29+02:00</updated><id>http://localhost:4000/radar/weather/2018/04/08/Interactive-radar-map-with-gdal</id><content type="html" xml:base="http://localhost:4000/radar/weather/2018/04/08/Interactive-radar-map-with-gdal.html">&lt;p&gt;This post builds on the previous post. As you’ve seen the image from Titan is
a static map of the radar coverage. To improve the map we wanted something
interactive where you can zoom and all that fancy stuff. I made a map with my
favorite tool, yes you guessed right, GMT, however it was still a static map so
no luck there. Next I explored some online options, the easiest was Mapbox.
However, it was not that easy. I actually have to lay out the whole Radar -&amp;gt;
Webserver process to underline how not so easy it is to get workable data, and
by workable data I mean netCDF files and if you think netCDF is an easy file
format to work with, think again.&lt;/p&gt;

&lt;p&gt;Without going into to detail about the radar itself, the process of getting the
current static image is something like this:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Magnetron Generates Pulse -&amp;gt; Radar
Echos -&amp;gt; Receiver Converts -&amp;gt; Titan Processes -&amp;gt; P2P 1 -&amp;gt; P2P 2 -&amp;gt; P2P 3 -&amp;gt;
Local Server -&amp;gt; Webserver -&amp;gt; Lekwena Website&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Not a lot of room for error you see (I’m kidding, there’s a lot of room for
errors and we experience them all).&lt;/p&gt;

&lt;p&gt;The data is also not netCDF, it’s MDV data. What’s MDV data, well I don’t know
but that’s what Titan gives us. Lucky for me there’s a Mdv2netcdf script in the
software so it’s possible to transform the data to something I can work with.&lt;/p&gt;

&lt;p&gt;Back to mapbox, after doing the whole Mdv2netcdf I hoped I could natively import 
the netcdf file without hassle. Apparently not, the fix was relatively easy.
Mapbox takes GEOtiff files and I remembered using &lt;strong&gt;gdal_translate&lt;/strong&gt; for something
in the past and after a very quick Google I did:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;gdal_translate radarin.nc radarout.tif&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;and this gave me a very gray image&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/radar/output.jpg&quot; alt=&quot;gray_radar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Although not ideal, the tif image can be imported into Mapbox and it works, but
a gray radar image makes no sense and it’s hard to distinguish dBz. Using
&lt;strong&gt;gdalinfo&lt;/strong&gt; you can inspect the tif or original netcdf file and you’ll see it
only has one band representing dBz. To actually make a color map of dBz
I figured out you have to use &lt;strong&gt;gdaldem&lt;/strong&gt;. First you have to make a color palette
and according to gdal’s website &lt;em&gt;“Since GDAL 1.8.0, GMT .cpt palette files are
also supported (COLOR_MODEL = RGB only).”&lt;/em&gt;. Anyway I didn’t use a cpt but it’s nice to
know.&lt;/p&gt;

&lt;p&gt;So after creating your palette, run gdaldem:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;gdaldem color-relief nc20171230_000123.nc &lt;span class=&quot;nt&quot;&gt;-alpha&lt;/span&gt; radar_pal.txt &lt;span class=&quot;nt&quot;&gt;-of&lt;/span&gt; GTiff outfile.tiff&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;and look what a nice image we have, all colorful and everything. However it is
still static&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/radar/outfile.jpg&quot; alt=&quot;gray_radar&quot; /&gt;&lt;/p&gt;

&lt;p&gt;With this overflow of gdal knowledge in me I discovered &lt;strong&gt;gdal2tiles&lt;/strong&gt;. 
Possibly the best discovery yet. Now I did not need Mapbox anymore, I figured
I can create my own interactive map without the need to register some place.&lt;/p&gt;

&lt;p&gt;Using &lt;strong&gt;gdal2tiles&lt;/strong&gt; is as easy as&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;gdal2tiles.py &lt;span class=&quot;nt&quot;&gt;-z&lt;/span&gt; 5-10 outfile.tiff&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;and now we have a really cool map (click on the layer tab in the map), which we are currently experimenting with before we put
it on the lekwenaradar website hosted on github. Best of all it seems to work :)&lt;/p&gt;

&lt;iframe height=&quot;750&quot; width=&quot;750&quot; src=&quot;/assets/images/radar/outfile/leaflet.html&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Now our chain gets a bit more links which means more places for possible
failure, but we have a way cooler map. To revisit the process:&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Magnetron Generates Pulse -&amp;gt; Radar Echos -&amp;gt; Receiver Converts -&amp;gt; Titan
Processes -&amp;gt; P2P 1 -&amp;gt; P2P 2 -&amp;gt; P2P 3 -&amp;gt; Local Server -&amp;gt; Mdv2netcdf -&amp;gt;
gdal_translate -&amp;gt; gdaldem -&amp;gt; gdal2tiles -&amp;gt; Webserver -&amp;gt; Lekwena Website&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;All in a day’s work&lt;/p&gt;</content><author><name></name></author><summary type="html">This post builds on the previous post. As you’ve seen the image from Titan is a static map of the radar coverage. To improve the map we wanted something interactive where you can zoom and all that fancy stuff. I made a map with my favorite tool, yes you guessed right, GMT, however it was still a static map so no luck there. Next I explored some online options, the easiest was Mapbox. However, it was not that easy. I actually have to lay out the whole Radar -&amp;gt; Webserver process to underline how not so easy it is to get workable data, and by workable data I mean netCDF files and if you think netCDF is an easy file format to work with, think again.</summary></entry><entry><title type="html">Launching the NWU-Lekwena radar</title><link href="http://localhost:4000/radar/weather/jekyll/2018/03/25/NWU-Lekwena-Radar.html" rel="alternate" type="text/html" title="Launching the NWU-Lekwena radar" /><published>2018-03-25T12:43:29+02:00</published><updated>2018-03-25T12:43:29+02:00</updated><id>http://localhost:4000/radar/weather/jekyll/2018/03/25/NWU-Lekwena-Radar</id><content type="html" xml:base="http://localhost:4000/radar/weather/jekyll/2018/03/25/NWU-Lekwena-Radar.html">&lt;p&gt;The &lt;a href=&quot;www.nwu.ac.za&quot;&gt;North West University Potchefstroom&lt;/a&gt; has a pretty cool
C-band radar currently under development. The radar, a WSR74-C radar, was
previously located in Texas and after three decades it was redeployed to
South-Africa for research purposes. The project was initiated before I started
my graduate studies, but since 2016 we have slowly worked to get the radar
operational. The site location and deployment of the radar was already
completed in 2015 and since then most problems have been related to data
transfer from the radar site to the university 30km away, we continue to have
some troubles with interference on the radar frequency and unreliable power.
Considering all this we managed to get the radar operational and running on
a more permanent bases. We also designed a simple website using Jekyll which
you can view on &lt;a href=&quot;http://www.lekwenaradar.co.za&quot;&gt;www.lekwenaradar.co.za&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It is worth noting that the software used for signal processing is RDAS while
the &lt;a href=&quot;http://www.ral.ucar.edu/projects/titan/home/&quot;&gt;Thunderstorm Identification, Tracking, Analysis and Nowcasting
(TITAN)&lt;/a&gt; contains algorithms to
track and analyse storm intensities and paths. The history of Titan and RDAS
starts in South-Africa (&lt;em&gt;can I say proudly South-African?&lt;/em&gt;) and is quite
&lt;a href=&quot;http://www.ral.ucar.edu/projects/titan/home/history.php&quot;&gt;interesting&lt;/a&gt;.&lt;/p&gt;

&lt;h1 id=&quot;the-website&quot;&gt;The Website&lt;/h1&gt;
&lt;p&gt;The development of &lt;a href=&quot;http://www.lekwenaradar.co.za&quot;&gt;www.lekwenaradar.co.za&lt;/a&gt; happened
pretty rapidly. Having some experience with Jekyll I advocated for deploying
a static site and the convince of using GitHub to host it as two major
advantages and it worked. Due to the rush to get something online I worked off
a custom &lt;a href=&quot;https://github.com/lorepirri/cayman-blog&quot;&gt;Cayman theme&lt;/a&gt;. This allowed
for hamburger menu on a mobile phone. We also added some other sites to make
a more interactive weather website. This was mostly from the &lt;a href=&quot;https://www.eumetsat.int/website/home/index.html&quot;&gt;European
Organisation for the Exploitation of Meteorological Satellites
(EUMETSAT)&lt;/a&gt;. To add &lt;a href=&quot;https://www.hennohavenga.com/weather/bash/gmt/2018/01/28/forecasting-weather-with-bash-and-other-linux-tools.html&quot;&gt;my own
synoptic
maps&lt;/a&gt;
I set up a crontab that goes through all the downloading processes and then it
pushes it automatically to the radar site every morning.&lt;/p&gt;

&lt;h1 id=&quot;how-to-interpret-the-radar-image&quot;&gt;How to interpret the radar image&lt;/h1&gt;
&lt;p&gt;Because we give a very raw product and also the fact that the radar is not
meant used as a severe weather alert system I wrote a short description of how
users should view the image above. I wrote this for the website and I’ll copy
it here. Below is a real-time image of the radar if it’s running smoothly.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://143.160.8.22/cappi.gif&quot; alt=&quot;radar_real&quot; /&gt; &lt;sub&gt;NWU
Lekwena Radar, almost realtime if running correctly &lt;/sub&gt;&lt;/p&gt;

&lt;h1 id=&quot;how-to-interpret-the-radar-image-1&quot;&gt;How to interpret the radar image&lt;/h1&gt;

&lt;h3 id=&quot;time&quot;&gt;Time&lt;/h3&gt;
&lt;p&gt;The radar is set to Coordinated Universal Time (UTC) and not South African
Standard Time (SAST). To correct for this you need to add two hours to the time
as indicated below, for example 12:04 UTC + 2 Hours = 14:04 SAST. To check if
the radar is currently running the time should match within +-10 minutes of the actual time,
if it doesn’t it’s safe to assume the radar or webserver is down.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/radar/RadarTime.png&quot; alt=&quot;radar_time&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;reflectivity-dbz&quot;&gt;Reflectivity (dBZ)&lt;/h3&gt;
&lt;p&gt;In the most basic terms a radar’s operation consists of a high frequency signal
pulse that’s generated from the site, this signal echo’s when it interacts with
large particles such as hail or raindrops and a receiver converts
the echo into something human interpretable. This echo is represented as
&lt;em&gt;decibel relative to Z&lt;/em&gt; or dBZ. Strong dBZ means there are large particles producing
a strong echo, this would be large rain, hail or ice particles in clouds.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/radar/RadarDBZ.png&quot; alt=&quot;radar_bdz&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;interference&quot;&gt;Interference&lt;/h3&gt;
&lt;p&gt;The NWU Lekwena Radar has an license to operate on the 5.62 gHz bandwidth and
any WiFi or communication network between 5.55 to 5.67 gHz causes problems and
hampers data quality. The public is encouraged not to use these bandwidths in
the Potchefstroom area and the NWU-CRG is willing to help users mitigate
interference by advising on the installation of Dynamic Frequency Selection
(DFS) devices. Users can also contact their service providers to learn more
about the frequency of their devices and how to avoid interference with the
Radar.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/radar/RadarInterf.png&quot; alt=&quot;radar_interference&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;places-indicators&quot;&gt;Places Indicators&lt;/h3&gt;
&lt;p&gt;The radar indicates towns with abbreviations and also some regional airports in
the Gauteng Area with the Airplane sign. The little cloud sign indicates
the location of the SAWS Irene Weather station. The circular lines indicate the distance
of from the radar site, which is a maximum of 200km due to various factors such as the
curvature of the earth&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/radar/RadarAirports.png&quot; alt=&quot;radar_interference&quot; /&gt;&lt;/p&gt;</content><author><name></name></author><summary type="html">The North West University Potchefstroom has a pretty cool C-band radar currently under development. The radar, a WSR74-C radar, was previously located in Texas and after three decades it was redeployed to South-Africa for research purposes. The project was initiated before I started my graduate studies, but since 2016 we have slowly worked to get the radar operational. The site location and deployment of the radar was already completed in 2015 and since then most problems have been related to data transfer from the radar site to the university 30km away, we continue to have some troubles with interference on the radar frequency and unreliable power. Considering all this we managed to get the radar operational and running on a more permanent bases. We also designed a simple website using Jekyll which you can view on www.lekwenaradar.co.za.</summary></entry></feed>